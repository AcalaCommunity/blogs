# Acala представляет смарт-контракты и совместимость с Ethereum для Polkadot DeFi

## Acala теперь поддерживает EVM и ink! паллеты на Substrate, что позволяет разработчикам использовать смарт-контракты на основе Solidity и Wasm

![Изображение для публикации](https://miro.medium.com/max/1600/0*-4rCl6SjqDKz7eBh)

Автор статьи: [Брайан Чен](https://medium.com/u/241f963260c9?source=post_page-----588b3891e53d--------------------------------)

Polkadot разработан как для простой интеграции с другими блокчейнами, такими как Bitcoin и Ethereum (через мосты, такие как Interlay и RenVM), так и для размещения ряда разнородных (так называемых независимых и настраиваемых), но взаимосвязанных цеей, называемых парачейнами. Polkadot больше похож на цепь инфраструктуры уровня 0, обеспечивая базовый уровень доверия, который поставляется с общей безопасностью Proof of Stake (PoS) и межсетевым взаимодействием. Цепи парачейнов, скорее всего, будут цепями для конкретной предметной области, оптимизированными для их вариантов использования и решения конкретных проблем предметной области, где Acala занимает сферу децентрализованных финансов. Мы предлагаем набор готовых примитивов DeFi, таких как стейблкоин (aUSD), деривативы для стекинга (например, позволяющие выкупить токены (LDOT) на застеканном/залоченном DOT) и децентрализованный обмен, чтобы обеспечить больше инноваций DeFi. Мы также создали общие служебные модули с открытым исходным кодом, такие как оракул, мультивалютную, универсальную среду мониторинга, которую могут использовать команды.

Парачейны на основе Substrate, такие как Acala, будут пользоваться полным технологическим стеком, предоставляемым этой структурой, начиная от технической инфраструктуры низкого уровня (RPC, среда выполнения веб-сборки, одноранговая связь и т. д.), до модулей уровня приложения, которые позволяют EVM (виртуальная машина Ethereum) и возможности смарт-контрактов. Это означает, что в обозримом будущем инновации на уровне цепи и технологический прогресс будут происходить с беспрецедентной скоростью и в больших масштабах; новые возможности будут легко и беспрепятственно реализованы в режиме plug-and-play с помощью безфорковых обновлений для всех цепей на основе Substrate (см. примеры на [рынке Substrate](https://marketplace-staging.substrate.dev/)).

Тем не менее, в Acala теперь доступны следующие возможности смарт-контрактов:

1.  Acala поддерживает паллет EVM (также известный как модуль времени выполнения), который, по сути, является реализацией виртуальной машины Ethereum на Substrate, так что контракты Solidity могут быть развернуты и запущены на Acala.
2.  Acala также поддерживает ink! контракт паллеты, которые позволяют использовать собственные смарт-контракты Substrate на основе Wasm (Web Assembly), написанные на Rust.

Это обновление обусловлено как техническим прогрессом, так и интересами сообщества. Acala помогает ряду протоколов, изучающих кросс-чейн развертывания DeFi на Polkadot, механизмы, о которых мы расскажем в этой статье, и смарт-контракты, безусловно, являются одним из важных направлений для изучения. В дальнейшем Acala будет более активно сотрудничать с [Parity](https://www.parity.io/) и другими участниками экосистемы, такими как [Moonbeam](https://moonbeam.network/), [Plasm](https://www.plasmnet.io/) и [Edgeware](https://edgewa.re/), и участие в разработке EVM и смарт-контрактов.

# Сейчас мы рассмотрим следующие темы:

1.  Кросс-чейн ликвидность через мосты
2.  Способы развертывания на Polkadot
3.  Способы развертывания на Kusama
4.  Способы развертывания на Acala
5.  Текущее состояние смарт-контрактов на Polkadot

# Кросс-чейн ликвидность через мосты

Мосты - это интероперабельная технология для передачи активов и сообщений между двумя экономически суверенными и технологически разными цепями, например между Polkadot и Ethereum или Bitcoin. Существуют разные виды мостов: от централизованных и надежных до более децентрализованных и ненадежных.

1.  **Кастодиальные решения**: при использовании типов настройки с несколькими подписями или Proof of Authority (PoA) их относительно проще реализовать и они доступны для использования прямо сейчас. [ChainX](https://chainx.org/) как Bitcoin мост и [ChainSafe](https://chainsafe.io/) как мост Ethereum являются примерами этого типа, а дорожные карты со временем станут более децентрализованными.
2.  **Решения без доверия**: использование экономических и/или криптографических гарантий для передачи активов в/из двух блокчейнов; они не вызывают доверия, но могут быть дорогостоящими для пользователей, а также все еще находятся в стадии исследований и разработок из-за технических проблем, связанных с ненадежной природой. [Interlay](https://medium.com/interlay/bitcoin-on-polkadot-proof-of-concept-for-trustless-bridge-shipped-6fb8e549bef0) как Bitcoin мост и [SnowFork](http://www.snowfork.com/) и [Darwinia](https://darwinia.network/) как мост Ethereum являются примерами этого типа.
3.  **Гибридные кастодиальные/надежные решения**: тогда есть решение [RenVM](https://renproject.io/), которое не требует прав доступа, с отличным пользовательским интерфейсом и популярностью с четким путем к децентрализации, но сейчас больше доверие было возложено на Команду Ren.

Acala нейтральна в отношении подходов к решениям мостов, поскольку разные типы мостов могут удовлетворять разные предпочтения пользователей в отношении надежности, удобства и стоимости, и есть веские причины для того, чтобы различные типы мостов сосуществовали и удовлетворяли различные потребности.

# Развертывание на релейной цепи Polkadot

Как уже упоминалось, Polkadot - это кросс-чейн инфраструктурная цепь 0-го уровня (называемая [Relay Chain](https://wiki.polkadot.network/docs/en/learn-architecture#relay-chain)). Следовательно, приложения и протоколы не могут быть развернуты непосредственно в Relay Chain (релейной цепи), а скорее с помощью следующих механизмов, предоставляемых как структуры сети Polkadot, каждый со своими компромиссами:

1.  **Развертывание как парачейн** - этот вариант отличается высочайшей степенью настраиваемости и гибкости как с технической, так и с экономической точки зрения. Он имеет более «постоянный» доступ (в течение периода аренды парачейна) к общей системе безопасности и межсетевой связи Polkadot. Его установка требует более высоких затрат и требует гораздо больше усилий для начальной загрузки и обслуживания сети, а также сообщества. Вы можете попробовать это, [изучив Acala](https://github.com/AcalaNetwork/Acala/wiki/1.-Get-Started).
2.  **Развертывание как паранить** - технически похоже на парачейн, но использует модель с оплатой по мере использования для обеспечения безопасности и доступа к обмену данными, следовательно, с меньшими затратами и более дешевым запуском. Если цепь не может получить слот парачейна, она может вернуться к параните, чтобы продолжить свою работу.
3.  **Развертывание как DApp на активном парачейне/параните** - для команд, которые хотят получить доступ к экосистеме Polkadot, но не хотят создавать и поддерживать блокчейн, или которые хотят попробовать что-то без особых предварительных обязательств, то развертывание на существующем парачейне может быть хорошим вариантом. Специально для приложений DApp, связанных с DeFi, вы можете рассматривать Acala как площадку для приземления (например, в [случае с Ren](https://medium.com/acalanetwork/bringing-btc-to-polkadot-acala-x-ren-e7959855d5aa?source=collection_home---4------6-----------------------).) И как помощника Polkadot, владеющего техническими ноу-хау, при изучении пространства.

Помимо технических и экономических соображений, следует также подумать о возможности компоновки. Степень и сложность компонуемости может варьироваться в зависимости от того, где вы приземляетесь - DApps на одном парачейне, естественно, будут обладать более высокой степенью компонуемости внутри этой цепочки (читайте про интеграцию Ren[ здесь ](https://github.com/AcalaNetwork/Acala/wiki/T.-Cross-chain-DeFi#ren)), кросс-парачейн DApps может уменьшить возможность компоновки и атомарность транзакций (см. интеграцию Laminar[ здесь](https://github.com/AcalaNetwork/Acala/wiki/T.-Cross-chain-DeFi#laminar)), а мосты могут иметь еще более низкую компоновку, поскольку они в основном сосредоточены на передаче значений и определенных конкретных сообщениях, передаваемых через назначенные цепочки блоков.

# Развертывание на релейной цепи Kusama

[Kusama](http://kusama.network), как и Polkadot, представляет собой межсетевую инфраструктурную цепь 0-го уровня с основной [релейной цепью](https://wiki.polkadot.network/docs/en/learn-architecture#relay-chain), которая обеспечивает безопасность и взаимодействие. Kusama предназначена для использования в качестве среды разработки для команд, готовящихся к развертыванию на Polkadot, или для команд, которые хотят строить исключительно на Kusama, чтобы снизить экономические барьеры для слотов парачейна и ускорить циклы управления. У разработчиков есть те же возможности для Kusama, что и для Polkadot, но с некоторыми оговорками:

1.  **Развертывание как парачейн** - Команды могут построить парачейн на Kusama по трем основным причинам. Во-первых, парачейн может быть развернут в Kusama после прохождения тестирования в тестовой сети Westend, чтобы точно настроить их технологию перед полным развертыванием в Polkadot. Некоторые команды, в том числе Acala, решат использовать парачейны как на Polkadot, так и на Kusama, чтобы обслуживать оба сообщества. В-третьих, команды (например, новые стартапы) могут также решить остаться исключительно на Kusama, если стоимость парачейн-слота Polkadot недостижима или если они предпочитают рискованный и динамичный характер Kusama. Парачейн-опция Kusama также является настраиваемой и гибкой как с технической, так и с экономической точки зрения.
2.  **Развертывание как паранити** - Kusama будет иметь ту же функциональность паранити, что и Polkadot, которая представляет собой модель с оплатой по мере использования для обеспечения безопасности и доступа к обмену данными, что приводит к меньшим накладным затратам и расходам на выполнение. Один из компромиссов заключается в том, что паранити имеют менее частую отправку блоков в релейную цепь, поэтому они могут лучше подходить для некоторых случаев использования, чем для других.
3.  **Развертывание как DApp на активном парачейне/параните ** - DApps могут быть построены на парачейнах Kusama или паранитях. DeFi DApps, например, могут быть созданы в сети Acala Kusama Network, а также во многих других случаях использования, таких как игры, коммуникации, социальные сети или DAO.

В следующем разделе мы рассмотрим различные способы развертывания в парачейне Acala.

# Развертывание в парачейне Acala

Вы можете рассматривать Acala как площадку для приземления DeFi на Polkadot и Kusama, и как своего друга-строителя, обладающего техническими ноу-хау. В настоящее время существует три способа развертывания на Acala:

1.  **Развертывайте модули времени выполнения (также известные как паллеты)** - это обеспечивает высочайший уровень настраиваемости и доступ к логике цепи Acala для более сложной интеграции. У него нет отказоустойчивой среды песочницы, которая есть у смарт-контрактов, поэтому он требует аудита безопасности и требует разрешения на управление. Он лучше подходит для инфраструктуры и протоколов общего пользования. [Модуль моста RenVM](https://github.com/AcalaNetwork/Acala/tree/master/ecosystem-modules/ren/renvm-bridge) - хороший тому пример. Совершенно новая учетная запись, в которой используется только недавно созданный renBTC, может выполнять любые транзакции в Acala без использования токена комиссии. Благодаря функции Acala FlexFee, такие токены, как renBTC, изначально интегрированы в качестве одного из токенов комиссии по умолчанию наряду с ACA, aUSD и DOT.
2.  **Развертывание смарт-контрактов Solidity** - для тех, кто хочет перенести часть или все свои существующие смарт-контракты Solidity на Polkadot без переписывания всего кода, это может быть хорошей отправной точкой. Например, некоторые команды использовали бы мост для перехода своих токенов от Ethereum к Polkadot, а затем развернули бы их на Acala для более быстрых и дешевых транзакций и лучшего взаимодействия с пользователем.
3.  **Разверните ink! смарт-контрактов** - это собственный смарт-контракт Wasm на основе Rust от Substrate, подробнее о его сравнении с EVM читайте [здесь](https://substrate.dev/docs/en/knowledgebase/smart-contracts/ink-fundamentals).

В качестве оговорки, модули смарт-контрактов близки, но еще не готовы (к стандарту Acala) к производству, и мы будем тесно сотрудничать с Parity и другими участниками экосистемы, чтобы доработать их. В следующем разделе мы рассмотрим предостережения и текущее состояние разработки.

# Текущее состояние смарт-контрактов

## EVM

Хотя Solidity и совместимые с EVM контракты могут быть развернуты и запущены в цепях на основе Substrate, таких как Acala, большая часть инструментов все еще разрабатывается, чтобы быть совместимыми с существующими инструментами разработки, такими как Truffle, Remix и т. д. SDK также разрабатываются для совместимости с существующими web3.js и другими библиотеками. Acala также сосредоточится на улучшении компоновки смарт-контрактов и модулей времени выполнения, чтобы ускорить внедрение кросс-чейн инноваций DeFi.

## Ink! Смарт-контракты

Rust-based ink! язык смарт-контрактов все еще находится в стадии разработки, как и его инструменты разработки (cargo-contract и [Redspot](https://github.com/patractlabs/redspot) - Truffle для Ink!) и SDK (polkadot.js).

# Следующие шаги

Acala теперь поддерживает EVM с уровнем совместимости [Frontier](https://github.com/paritytech/frontier) Substrate-Ethereum. Теперь мы можем запускать немодифицированные DApps Ethereum. Затем мы будем развертывать более сложные (реально существующие) контракты Solidity, тестировать поддержку инструментов, включая Metamasks, и внедрять интеграцию с паллетами (исполняемыми модулями) для улучшения совместимости и обеспечения совместимости с ERC20 и другими стандартами токенов.

Считайте это своим официальным приглашением на [**Build with Acala**](https://github.com/AcalaNetwork/Acala/wiki/U.-Build-with-Acala), где мы поддерживаем и помогаем командам создавать ценные кросс-чейн проекты DeFi с Polkadot и Kusama.

# Присоединяйтесь к нам

[Website](https://acala.network/) | [Twitter](https://twitter.com/AcalaNetwork) | [GitHub](https://github.com/AcalaNetwork/Acala) | [Acala Wiki](https://github.com/AcalaNetwork/Acala/wiki) | [Discord](https://discord.gg/vdbFVCH) | [Telegram](https://t.me/acalaofficial) | [Riot Chat](https://riot.im/app/#/room/#acala:matrix.org)

Чтобы быть в курсе того, как запускаются парачейны Acala на Polkadot и Kusama, подпишитесь на новостную рассылку от [Acala](https://share.hsforms.com/1X9RxkXk-R62I0VNbATaDXw4h8qc).

# Об Acala

[ Acala ](http://acala.network/) - это децентрализованный финансовый центр Polkadot, который позволяет быстро и легко использовать или создавать финансовые приложения, повышая эффективность торговли и экономя драгоценное время. Платформа предлагает набор финансовых примитивов: стейблкоин с множественным обеспечением, поддерживаемый кросс-чейновыми активами, такими как Bitcoin, децентрализованная биржа и финансовых инноваций. Acala - это, де-факто, открытая платформа для финансовых приложений, использующая смарт-контракты или встроенные протоколы с готовыми возможностями кросс-чейна, безопасностью и финансовой оптимизацией.
